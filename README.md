# Asset Manager

ä¸€ä¸ªè½»é‡çº§ã€æ’ä»¶åŒ–çš„èµ„äº§ç®¡ç†åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ Rust å’Œ Lua æ„å»ºã€‚

## ç‰¹æ€§

- ğŸ¦€ **Rust æ ¸å¿ƒ** - é«˜æ€§èƒ½ã€å†…å­˜å®‰å…¨
- ğŸŒ™ **Lua æ’ä»¶ç³»ç»Ÿ** - çµæ´»æ‰©å±•åŠŸèƒ½ï¼Œæ²™ç®±å®‰å…¨éš”ç¦»
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨** - SQLite æ•°æ®åº“ï¼Œæ•°æ®å®Œå…¨æœ¬åœ°åŒ–
- ğŸ–¥ï¸ **è·¨å¹³å°** - PCç«¯ä½¿ç”¨ Tauri 2.0ï¼Œæœªæ¥æ”¯æŒç§»åŠ¨ç«¯
- ğŸª¶ **è½»é‡çº§** - æœ€å°åŒ–ä¾èµ–ï¼Œå¿«é€Ÿå¯åŠ¨
- ğŸ¨ **ç°ä»£ UI** - Vue 3 + Vite å‰ç«¯ï¼Œå“åº”å¼è®¾è®¡

## æ¶æ„

```
asset-manager/
â”œâ”€â”€ .cargo/               # Cargo é•œåƒæºé…ç½®ï¼ˆrsproxy å›½å†…åŠ é€Ÿï¼‰
â”œâ”€â”€ core/                 # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åº“
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ asset/       # èµ„äº§æ¨¡å‹ï¼ˆæ”¯æŒ10+ç±»å‹ï¼šç°é‡‘/è‚¡ç¥¨/åŸºé‡‘/æˆ¿äº§ç­‰ï¼‰
â”‚       â”œâ”€â”€ plugin/      # Lua æ’ä»¶ç³»ç»Ÿï¼ˆmlua, æ²™ç®±éš”ç¦»ï¼‰
â”‚       â””â”€â”€ storage/     # SQLite å­˜å‚¨å±‚ï¼ˆCRUD + æœç´¢ + ç»Ÿè®¡ï¼‰
â”œâ”€â”€ src-tauri/           # Tauri 2.0 PC æ¡Œé¢åº”ç”¨
â”‚   â”œâ”€â”€ capabilities/    # åº”ç”¨æƒé™é…ç½®
â”‚   â”œâ”€â”€ icons/           # åº”ç”¨å›¾æ ‡ï¼ˆICO/PNG/ICNSï¼‰
â”‚   â””â”€â”€ src/             # Rust åç«¯ï¼ˆå‘½ä»¤å®šä¹‰ + åº”ç”¨çŠ¶æ€ï¼‰
â”œâ”€â”€ plugins/             # Lua æ’ä»¶ç›®å½•
â”‚   â””â”€â”€ stats_helper/   # ç¤ºä¾‹æ’ä»¶ï¼šèµ„äº§ç»Ÿè®¡åŠ©æ‰‹
â””â”€â”€ ui/                  # Vue 3 å‰ç«¯ç•Œé¢
    â””â”€â”€ src/
        â”œâ”€â”€ App.vue      # ä¸»åº”ç”¨ï¼ˆä»ªè¡¨ç›˜/èµ„äº§ä¸è´Ÿå€ºæ’ä»¶ç®¡ç†ï¼‰
        â”œâ”€â”€ main.js      # å…¥å£æ–‡ä»¶
        â””â”€â”€ style.css    # å…¨å±€æ ·å¼
```

## å¼€å‘ç¯å¢ƒè¦æ±‚

- **Rust** 1.75+ (æ¨èä½¿ç”¨ rustup å®‰è£…ï¼Œå›½å†…å¯ç”¨æ¸…åé•œåƒ)
- **Node.js** 18+ (ç”¨äºå‰ç«¯å¼€å‘)
- **Tauri CLI** (`cargo install tauri-cli`)
- **Visual Studio Build Tools** (Windows éœ€è¦ MSVC C++ å·¥å…·é“¾)

## å¿«é€Ÿå¼€å§‹

### å¼€å‘æ¨¡å¼

```bash
# 1. å®‰è£…å‰ç«¯ä¾èµ–
cd ui && npm install && cd ..

# 2. å®‰è£… Tauri CLIï¼ˆå¦‚æœªå®‰è£…ï¼‰
cargo install tauri-cli

# 3. å¼€å‘æ¨¡å¼è¿è¡Œï¼ˆå‰ç«¯è‡ªåŠ¨çƒ­é‡è½½ï¼‰
cargo tauri dev
```

> **Windows ç”¨æˆ·æç¤º**ï¼šå¦‚æœç»ˆç«¯æç¤º `cargo` æœªæ‰¾åˆ°ï¼Œéœ€è¦å…ˆåˆ·æ–° PATH æˆ–é‡å¯ç»ˆç«¯ã€‚
> ä¹Ÿå¯ç›´æ¥ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ `run.bat` ä¸€é”®å¯åŠ¨ã€‚

### æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
# æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
cargo tauri build
# è¾“å‡ºä½ç½®ï¼š
#   å¯æ‰§è¡Œæ–‡ä»¶: target/release/asset-manager.exe
#   å®‰è£…åŒ…:     target/release/bundle/nsis/  (Windows å®‰è£…ç¨‹åº)
#   MSI åŒ…:     target/release/bundle/msi/   (Windows MSI å®‰è£…åŒ…)
```

> **æ³¨æ„**ï¼šé¦–æ¬¡æ„å»ºéœ€è¦ç¼–è¯‘æ‰€æœ‰ä¾èµ–ï¼ˆçº¦ 500+ crateï¼‰ï¼Œè€—æ—¶è¾ƒé•¿ï¼ˆ5-15 åˆ†é’Ÿï¼‰ã€‚åç»­å¢é‡æ„å»ºä¼šå¿«å¾ˆå¤šã€‚

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

Windows ç”¨æˆ·åŒå‡»é¡¹ç›®æ ¹ç›®å½•çš„ `run.bat` å³å¯å¯åŠ¨å¼€å‘æ¨¡å¼ã€‚

## åŠŸèƒ½è¯´æ˜

### ä»ªè¡¨ç›˜
- æ€»èµ„äº§ä»·å€¼æ¦‚è§ˆ
- æŒ‰èµ„äº§ç±»å‹åˆ†å¸ƒç»Ÿè®¡å›¾

### èµ„äº§ç®¡ç†
- æ·»åŠ èµ„äº§ï¼ˆåç§°/ç±»å‹/ä»·å€¼/è´§å¸/æ ‡ç­¾ï¼‰
- æœç´¢èµ„äº§ï¼ˆæŒ‰åç§°/æè¿°/æ ‡ç­¾ï¼‰
- åˆ é™¤èµ„äº§
- æ ‡ç­¾è¾“å…¥æ”¯æŒæœ€è¿‘æ ‡ç­¾ä¸‹æ‹‰ã€å®æ—¶æ£€ç´¢ã€å›è½¦åˆ›å»ºä¸èŠ¯ç‰‡åŒ–ç®¡ç†
- æ”¯æŒèµ„äº§ç±»å‹ï¼šç°é‡‘ã€é“¶è¡Œå­˜æ¬¾ã€è‚¡ç¥¨ã€åŸºé‡‘ã€å€ºåˆ¸ã€æˆ¿äº§ã€è½¦è¾†ã€åŠ å¯†è´§å¸ã€è´µé‡‘å±ç­‰

### æ’ä»¶ç³»ç»Ÿ
- æŸ¥çœ‹å·²å®‰è£…æ’ä»¶
- å¯ç”¨/ç¦ç”¨æ’ä»¶å¼€å…³
- æ’ä»¶ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ˆåˆ›å»º/æ›´æ–°/åˆ é™¤èµ„äº§æ—¶è§¦å‘ï¼‰

## æ’ä»¶å¼€å‘

åœ¨ `plugins/` ç›®å½•ä¸‹åˆ›å»ºå­ç›®å½•ï¼ŒåŒ…å« `init.lua` å…¥å£æ–‡ä»¶ï¼š

```lua
-- plugins/my_plugin/init.lua
local plugin = {}

plugin.name = "My Plugin"
plugin.version = "1.0.0"
plugin.author = "Your Name"
plugin.description = "æ’ä»¶æè¿°"

function plugin.on_load()
    log("Plugin loaded!")
end

function plugin.on_asset_created(asset_json)
    log("New asset created!")
end

function plugin.on_asset_updated(asset_json)
    -- èµ„äº§æ›´æ–°æ—¶è§¦å‘
end

function plugin.on_asset_deleted(asset_id)
    -- èµ„äº§åˆ é™¤æ—¶è§¦å‘
end

return plugin
```

### å¯ç”¨äº‹ä»¶

| äº‹ä»¶ | å‚æ•° | è¯´æ˜ |
|------|------|------|
| `on_load` | æ—  | æ’ä»¶åŠ è½½æ—¶ |
| `on_unload` | æ—  | æ’ä»¶å¸è½½æ—¶ |
| `on_app_started` | æ—  | åº”ç”¨å¯åŠ¨æ—¶ |
| `on_app_closing` | æ—  | åº”ç”¨å…³é—­æ—¶ |
| `on_asset_created` | JSON å­—ç¬¦ä¸² | èµ„äº§åˆ›å»ºå |
| `on_asset_updated` | JSON å­—ç¬¦ä¸² | èµ„äº§æ›´æ–°å |
| `on_asset_deleted` | èµ„äº§ ID | èµ„äº§åˆ é™¤å |

### æ²™ç®±å®‰å…¨

æ’ä»¶è¿è¡Œåœ¨ Lua æ²™ç®±ä¸­ï¼Œ`os`ã€`io`ã€`loadfile`ã€`dofile` ç­‰å±é™©å‡½æ•°å·²è¢«ç§»é™¤ã€‚å¯ä½¿ç”¨ `log()` å’Œ `print()` è¾“å‡ºæ—¥å¿—ã€‚

## å›½å†…é•œåƒé…ç½®

é¡¹ç›®å·²é…ç½® rsproxy å›½å†… crates é•œåƒï¼ˆ`.cargo/config.toml`ï¼‰ï¼ŒRust å·¥å…·é“¾æ¨èä½¿ç”¨ï¼š

```bash
set RUSTUP_DIST_SERVER=https://mirrors.tuna.tsinghua.edu.cn/rustup
set RUSTUP_UPDATE_ROOT=https://mirrors.tuna.tsinghua.edu.cn/rustup
```

## License

MIT License
